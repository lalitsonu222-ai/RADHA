<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§∞‡§æ‡§ß‡§æ ‡§®‡§æ‡§Æ ‡§ú‡§æ‡§™ ‡§ï‡§æ‡§â‡§Ç‡§ü‡§∞</title>
    <!-- PWA Manifest Link -->
    <link rel="manifest" href="/manifest.json">
    <style>
        :root {
            --bg-color: #fff5e6;
            --text-color: #333;
            --accent-color: #ff6600;
            --button-text-color: white;
            --card-bg: #ffffff;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a2e;
            --text-color: #e0e0e0;
            --accent-color: #e94560;
            --button-text-color: white;
            --card-bg: #2a2a3e;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            text-align: center;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            transition: background 0.3s, color 0.3s;
        }

        .container {
            width: 90%;
            max-width: 400px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .header button {
            background: var(--card-bg);
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            color: var(--text-color);
        }

        #count {
            font-size: 80px;
            color: var(--accent-color);
            margin: 10px 0;
        }

        .tap-area {
            position: relative;
            width: 200px;
            height: 200px;
            background: var(--accent-color);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin: 20px auto;
            color: var(--button-text-color);
        }

        .tap-area h2 {
            margin: 0;
            font-size: 32px;
        }

        .tap-area span {
            font-size: 14px;
            opacity: 0.8;
        }

        .card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .mala-info {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h3>‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§ß‡§æ</h3>
            <div>
                <button onclick="toggleTheme()">‚òÄÔ∏è/üåô</button>
                <button onclick="resetCounter()">üîÑ</button>
            </div>
        </div>

        <div id="count">0</div>
        <p>‡§ï‡•Å‡§≤ ‡§ú‡§æ‡§™</p>

        <div class="tap-area" onclick="increment()">
            <h2>‡§∞‡§æ‡§ß‡§æ</h2>
            <h2>‡§∞‡§æ‡§ß‡§æ</h2>
            <span>TAP BEAD</span>
        </div>

        <div class="card">
            <div class="mala-info">
                <span>‡§Æ‡§æ‡§≤‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£:</span>
                <span id="mala-count">0</span>
            </div>
        </div>
        
        <div class="card">
            <p style="font-size: 12px;">"‡§∞‡§æ‡§ß‡§æ ‡§®‡§æ‡§Æ ‡§Æ‡•á‡§Ç ‡§µ‡•ã ‡§∂‡§ï‡•ç‡§§‡§ø ‡§π‡•à ‡§ú‡•ã ‡§π‡•É‡§¶‡§Ø ‡§ï‡•ã ‡§™‡•ç‡§∞‡•á‡§Æ ‡§∏‡•á ‡§≠‡§∞ ‡§¶‡•á‡§§‡•Ä ‡§π‡•à"</p>
        </div>
    </div>

    <script>
        let count = localStorage.getItem('jaapCount') || 0;
        let malaCount = localStorage.getItem('malaCount') || 0;
        const countEl = document.getElementById('count');
        const malaCountEl = document.getElementById('mala-count');
        const body = document.body;

        countEl.innerText = count;
        malaCountEl.innerText = malaCount;
        
        // Load theme from local storage
        document.documentElement.setAttribute('data-theme', localStorage.getItem('theme') || 'light');

        function increment() {
            count++;
            countEl.innerText = count;
            localStorage.setItem('jaapCount', count);
            
            // Check for Mala completion
            if (count % 108 === 0) {
                malaCount++;
                malaCountEl.innerText = malaCount;
                localStorage.setItem('malaCount', malaCount);
                // Optional: Add a subtle alert or sound here
            }

            // Haptic feedback (mobile only)
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        function resetCounter() {
            if (confirm("‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ü‡§ú ‡§ï‡•Ä ‡§ó‡§ø‡§®‡§§‡•Ä ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) {
                count = 0;
                malaCount = 0;
                countEl.innerText = count;
                malaCountEl.innerText = malaCount;
                localStorage.setItem('jaapCount', count);
                localStorage.setItem('malaCount', malaCount);
            }
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Register Service Worker for PWA (needs a manifest.json file in the repo root)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js').then(registration => {
                    console.log('SW registered: ', registration);
                }).catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
            });
        }
    </script>
</body>
</html>
